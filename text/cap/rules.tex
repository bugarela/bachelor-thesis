	\begin{figure}[ht]
	\centering
  {\fbox{
      $\begin{array}{c}

         \fbox{$\vdash Spec \TEq code$} \\ \\

      \begin{array}{c}
          \begin{minipage}[t]{0.6\textwidth}
           \infer[\text{\tt (MOD)}]{
             \begin{array}{l}
               \Gamma\vdash
               \begin{array}{l}
                 \MODULE\ M\\
                 \CONSTANTS\ C_0, \dots, C_n\\
                 \VARIABLES\ V_0, \dots, V_n\\
                 Def_0\\
                 \vdots\\
                 Def_n\\
                 Def_{init}\\
                 Def_{next}
             \end{array}
               \TEq
               \progfigmed{
               defmodule M do\\
               ~~@oracle spawn(Oracle, :listen, [])\\
               ~~$\texttt{const}_0$, ..., $\texttt{const}_n$\\
               ~~$\texttt{def}_0$, ..., $\texttt{def}_n$\\
               ~~def\_next\\
               ~~def\_decide\_action\\
               end\\\\
               M.main(initial\_state)}
             \end{array}
           }
           {
             \begin{array}{c}
               \Gamma\vdash \CONSTANTS C_0, \dots, C_n \TEq \texttt{$\texttt{const}_0$, ..., $\texttt{const}_n$}\smallskip\\
               \begin{array}{rll}
                 \Gamma \cup \{C_0 : const, \dots, C_n : const\} \vdash& Def_0 &\TEq \texttt{def}_0\\
                 \vdots&\\
                 \Gamma \cup \{C_0 : const, \dots, C_n : const\} \vdash& Def_n &\TEq \texttt{def}_n\smallskip\\
                 \Gamma \cup \{C_0 : const, \dots, C_n : const\} \vdash_{next}& Def_{next} &\TEq \texttt{def\_next}\smallskip\\
                 \Gamma \cup \{M : module, C_0 : const, \dots, C_n : const\} \vdash_{init}& Def_{init} &\TEq \texttt{initial\_state}
               \end{array}
             \end{array}
           }
         \end{minipage}\vspace*{.7cm}\\

        \begin{minipage}[t]{0.8\textwidth}
          \infer[\text{\tt (DEF)}]{
            \begin{array}{c}
              \Gamma\vdash NomeAcao(p_0, \dots, p_n) \triangleq \FANCYA \TEq\\
              \progfig{
              def nome\_acao\_condition(variables, $p_0,\ \dots,\ p_n$)\ do\\
              ~~$c_0$\ and \ ...\ and\ $c_n$\\
              end\\
              def nome\_acao(variables, $p_0,\ \dots,\ p_n$)\ do\\
              ~~Map.merge($a_0$, Map.merge(..., $a_n$))\\
              end
              }
            \end{array}
          }
          {
            \Gamma \cup \{p_0 : param, \dots, p_n : param\} \vdash_d \FANCYA \TEq ((c_o, \dots,
            c_n), (a_0, \dots, a_n))
          }
        \end{minipage}\vspace*{.7cm}\\

        \begin{minipage}[t]{0.8\textwidth}
          \infer[\text{\tt (CONST)}]{
            \Gamma\vdash\CONSTANTS C_0, \dots, C_n \TEq
            \begin{array}{c}
              \progfigsmall{
              @$C_0$ ``<Value for $C_0$>''\\
              def $C_0$, do:\ @$C_0$\\
              $\vdots$\\
              @$C_n$ ``<Value for $C_n$>''\\
              def $C_n$, do:\ @$C_n$
              }
            \end{array}
          }
          {
          }
        \end{minipage}\\

      \end{array}
			\end{array}$
		}}
		\caption{Tradução da especificação}
		\label{fig:t-specification}
	\end{figure}

\begin{figure}[ht]
	\centering
  {\fbox{
      $\begin{array}{c}

         \fbox{$\Gamma\vdash_{init} P \TEq a$} \\ \\

         \begin{array}{c}
           
         \begin{minipage}[t]{0.25\textwidth}
           \infer[\text{\tt (INIT-EQ)}]{
               \Gamma\vdash_{init} I = v \TEq \texttt{\%\{ i:\ x \}}
           }
           {
             \Gamma\vdash_v v \TEq \ttx
           }
         \end{minipage} \vspace{.7cm}\\
         \begin{minipage}[t]{0.4\textwidth}
           \infer[\text{\tt (INIT-AND)}]{
               \Gamma\vdash_{init}
               \begin{array}{c}
                 \land\ P_0 \\
                 \vdots \\
                 \land\ P_n
               \end{array}
               \TEq \texttt{Map.merge($\tta_0$, Map.merge(..., $\tta_n$))}\\
           }
           {
             \begin{array}{c}
               \Gamma\vdash_{init} P_0 \TEq \tta_0\\
               \vdots\\
               \Gamma\vdash_{init} P_n \TEq \tta_n
             \end{array}
           }
         \end{minipage}\vspace{1cm}\\

         \fbox{$\Gamma\vdash_{next} NomeAcao \triangleq \FANCYA \TEq \texttt{def}$} \\ \\

             \begin{minipage}[t]{0.6\textwidth}
               \infer[\text{\tt (NEXT)}]{
                 \Gamma\vdash_{next} NomeAcao \triangleq \FANCYA \TEq
                 \progfigmed{
                   def main(variables) do\\
                   ~~IO.puts (inspect variables)\\\\
                   ~~main(\\
                   ~~~~Map.merge($\tta_0$, Map.merge(..., $\tta_n$))\\
                   ~~)\\
                   end
                 }
               }
               {
                 \Gamma\vdash_d\FANCYA \TEq (\{\},\ \tta_0, \dots, \tta_n)
               }
         \end{minipage}\vspace*{.7cm}\\

          \end{array}
			\end{array}$
		}}
		\caption{Tradução do Estado Incial de da função de próximo estado}
		\label{fig:t-init-next}
	\end{figure}
  
\begin{figure}[ht]
	\centering
  {\fbox{
      $\begin{array}{c}

         \fbox{$\Gamma\vdash_d \FANCYA \TEq (\overline{c}, \overline{a})$} \\ \\
         \begin{array}{c}
           \begin{minipage}[T]{0.2\textwidth}
           \infer[\text{\tt (COND)}]{
             \Gamma\vdash_d P \TEq (\{c\},\ \{\})
           }
           {
             \Gamma\vdash_p P \TEq c
           }\vspace*{.7cm}

           \infer[\text{\tt (ACT)}]{
             \Gamma\vdash_d A \TEq (\{\},\ \{a\})
           }
           {
             \Gamma\vdash_a A \TEq a
           }

         \end{minipage}\hspace*{.7cm}

         \begin{minipage}[B]{0.5\textwidth}
           \infer[\text{\tt (AND)}]{
               \Gamma\vdash_d
               \begin{array}{c}
                 \land\ \FANCYA_0 \\
                 \vdots \\
                 \land\ \FANCYA_n
               \end{array}
               \TEq (\overline{c_o} \cup \dots \cup \overline{c_n},\ \overline{a_o} \cup \dots \cup \overline{a_n})
           }
           {
             \begin{array}{c}
               \Gamma\vdash_d \FANCYA_0 \TEq (\overline{c_0},\ \overline{a_0})\\
               \vdots\\
               \Gamma\vdash_d \FANCYA_n \TEq (\overline{c_n},\ \overline{a_n})
             \end{array}
           }
         \end{minipage}\vspace{1cm}\\

           \begin{minipage}[t]{0.8\textwidth}
             \infer[\text{\tt (OR)}]{
                 \begin{array}{l}
                   \Gamma\vdash_d
                   \begin{array}{c}
                     \lor\ \FANCYA_0 \\
                     \vdots \\
                     \lor\ \FANCYA_n
                   \end{array}
                   \TEq (\{\},\ \{\text{\tt decide\_action}(l)\})
                 \end{array}
               }
               {
                 \begin{array}{c}
                   \Gamma\vdash_d \FANCYA_0 \TEq (c_{00}, \dots, c_{0n},\ a_{00}, \dots, a_{0n})\\
                   \vdots\\
                   \Gamma\vdash_d \FANCYA_n \TEq (c_{n0}, \dots, c_{nn},\ a_{n0}, \dots, a_{nn})\\
               \end{array}
             }
         \end{minipage}\\

           \begin{minipage}[t]{0.8\textwidth}
             \hspace*{2cm}
             \progfig{
               $onde\ l =$
               [\\
               ~~\%\{\\
               ~~~~action: show([$a_{00}, \dots, a_{0n}$])\\
               ~~~~condition: $c_{00}$\ and\ $\dots$\ and\ $c_{0n}$\\
               ~~~~state: Map.merge($a_{00}$, Map.merge($\dots$, $a_{0n}$))\\
               ~~\},\\
               ~~$\dots$,\\
               ~~\%\{\\
               ~~~~action: show([$a_{n0}, \dots, a_{nn}$])\\
               ~~~~condition: $c_{n0}$\ and\ $\dots$\ and\ $c_{nn}$\\
               ~~~~state: Map.merge($a_{n0}$, Map.merge($\dots$, $a_{nn}$))\\
               ~~\}\\
               ]\\
             }

           \end{minipage}
         \end{array}
			\end{array}$
		}}
		\caption{Tradução intermediária de definições}
		\label{fig:definitions}
	\end{figure}

\begin{figure}[ht]
	\centering
  {\fbox{
      $\begin{array}{c}

         \fbox{$\Gamma\vdash_p P \TEq c$} \\ \\

         \begin{array}{c}
           
         \begin{minipage}[t]{0.25\textwidth}
           \infer[\text{\tt (PRED-EQ)}]{
               \Gamma\vdash_p v_x = v_y \TEq \texttt{x == y}
           }
           {
             \Gamma\vdash_v v_x \TEq x\hspace*{.4cm}
             \Gamma\vdash_v v_y \TEq y
           }
         \end{minipage}\hspace*{.2cm}
           
         \begin{minipage}[t]{0.25\textwidth}
           \infer[\text{\tt (PRED-NEQ)}]{
               \Gamma\vdash_p v_x \noteq v_y \TEq \texttt{x != y}
           }
           {
             \Gamma\vdash_v v_x \TEq x\hspace*{.4cm}
             \Gamma\vdash_v v_y \TEq y
           }
         \end{minipage}\vspace*{.7cm}\\

         \begin{minipage}[t]{0.4\textwidth}
           \infer[\text{\tt (PRED-IN)}]{
               \Gamma\vdash_p v_e \in v_l \TEq \texttt{Enum.member?($l$,\ $e$)}
           }
           {
             \Gamma\vdash_v v_e \TEq e\hspace*{.4cm}
             \Gamma\vdash_v v_l \TEq l
           }
         \end{minipage}\\
         \end{array}\vspace*{1cm}\\

         \fbox{$\Gamma\vdash_a A \TEq a$} \\ \\

         \begin{array}{c}
           
         \begin{minipage}[t]{0.6\textwidth}
           \infer[\text{\tt (ACT-UNCH)}]{
         \begin{array}{c}
             \Gamma\vdash_a \UNCHANGED \langle I_0, \dots, I_n \rangle \TEq\\
             \texttt{\%\{ $I_0$:\ variables[:$I_0$]$,\ \dots,\ I_n$:\ variables[:$I_n$] \}}
         \end{array}
           }
           {
           }
         \end{minipage}\vspace*{.7cm}\\

         \begin{minipage}[t]{0.4\textwidth}
           \infer[\text{\tt (ACT-PRIM)}]{
               \Gamma\vdash_a I' = v \TEq \texttt{\%\{ $I$:\ $x$ \}}
           }
           {
             \Gamma\vdash_v v \TEq x
           }
         \end{minipage}\\
         \end{array}
			\end{array}$
		}}
		\caption{Tradução de predicados e ações}
		\label{fig:t-pred-act}
	\end{figure}

  \begin{figure}[ht]
	\centering
  {\fbox{
      $\begin{array}{c}

         \fbox{$\Gamma\vdash_v v \TEq x$} \\ \\

         \begin{array}{c}
           
         \begin{minipage}[t]{0.25\textwidth}
           \infer[\text{\tt (VAL-PARAM)}]{
               \Gamma\vdash_v I \TEq I
           }
           {
             \{I : param\} \in \Gamma
           }
         \end{minipage}\hspace*{.3cm}
            
         \begin{minipage}[t]{0.25\textwidth}
           \infer[\text{\tt (VAL-VAR)}]{
               \Gamma\vdash_v I \TEq \texttt{variables[:$I$]}
           }
           {
             \{I : param\} \notin \Gamma\hspace*{.6cm}
             \{I : const\} \notin \Gamma
           }
         \end{minipage}\vspace*{.7cm}\\
           
         \begin{minipage}[t]{0.25\textwidth}
           \infer[\text{\tt (VAL-CONST)}]{
             \Gamma\vdash_v I \TEq \texttt{@I}
           }
           {
             \begin{array}{c}
             \{I : const\} \in \Gamma\\
             \{M : module\} \notin \Gamma
             \end{array}
           }
         \end{minipage}\hspace*{.2cm}
           
         \begin{minipage}[t]{0.25\textwidth}
           \infer[\text{\tt (VAL-ATTR)}]{
             \Gamma\vdash_v I \TEq \texttt{M.I}
           }
           {
             \begin{array}{c}
             \{I : const\} \in \Gamma\\
             \{M : module\} \in \Gamma
             \end{array}
           }
         \end{minipage}\vspace*{.7cm}\\

         \begin{minipage}[t]{0.4\textwidth}
           \infer[\text{\tt (SET-LIT)}]{
             \Gamma\vdash_v \{v_0, \dots, v_n\} \TEq \texttt{MapSet.new([$x_0, \dots, x_n$])}
           }
           {
             \Gamma\vdash_v v_0 \TEq x_o\ \dots\ \Gamma\vdash_v v_n \TEq x_n
           }
         \end{minipage}\vspace*{.7cm}\\
           
          \begin{minipage}[t]{0.4\textwidth}
           \infer[\text{\tt (SET-UNION)}]{
             \Gamma\vdash_v S_{a} \cup S_{b} \TEq \texttt{MapSet.union($s_a$,\ $s_b$)}
           }
           {
             \Gamma\vdash_v S_{a} \TEq s_a\hspace*{.4cm}
             \Gamma\vdash_v S_{b} \TEq s_b
           }
         \end{minipage}\vspace*{.7cm}\\

         \begin{minipage}[t]{0.4\textwidth}
           \infer[\text{\tt (REC-LIT)}]{
             \Gamma\vdash_v [k_0 \mapsto v_{o}, \dots, k_n \mapsto v_{n}] \TEq
             \texttt{\%\{ $k_0$:\ $x_0, \dots, k_n$:\ $x_n$ \}}
           }
           {
             \Gamma\vdash_v v_0 \TEq x_o\ \dots\ \Gamma\vdash_v v_n \TEq x_n
           }
         \end{minipage}\vspace*{.7cm}\\

         \begin{minipage}[t]{0.4\textwidth}
           \infer[\text{\tt (REC-EXCEPT)}]{
             \Gamma\vdash_v [I \EXCEPT ![k] = v] \TEq
             \texttt{Map.put($i, k, x$)}
           }
           {
             \Gamma\vdash_v v \TEq x\hspace*{.4cm}
             \Gamma\vdash_v I \TEq i
           }
         \end{minipage}\vspace*{.7cm}\\

           \begin{minipage}[t]{0.4\textwidth}
           \infer[\text{\tt (REC-INDEX)}]{
             \Gamma\vdash_v I[k] \TEq \texttt{$i$[$k$]}
           }
           {
             \Gamma\vdash_v I \TEq i
           }
         \end{minipage}\vspace*{.7cm}\\
         \end{array}
			\end{array}$
		}}
		\caption{Tradução de valores}
		\label{fig:t-specification}
	\end{figure}
  
